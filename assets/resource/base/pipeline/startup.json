{
    "StartUp": {
        "post_wait_freezes": 300,
        "timeout": 60000,
        "next": [
            "HomeFlagFirst",
            "StartGame",
            "[JumpBack]Start1999",
            "[JumpBack]Download",
            "[JumpBack]GameLoading2",
            "[JumpBack]BluePochLogo",
            "[JumpBack]Disclaimer",
            "[JumpBack]HomeLoading",
            "[JumpBack]GameLoading",
            "[JumpBack]ObtainedAwards",
            "[JumpBack]AccumulatedSignIn",
            "[JumpBack]BirthdayReward",
            "[JumpBack]Reward",
            "[JumpBack]SignInReward",
            "[JumpBack]ClosePageFirst",
            "[JumpBack]Confirm",
            "[JumpBack]VictoryReturn",
            "[JumpBack]Downloading",
            "[JumpBack]CandyCancel",
            "[JumpBack]BackButton",
            "[JumpBack]HomeButton",
            "[JumpBack]ClickHomeCount"
        ]
    },
    "ReturnMain": {
        "doc": "返回主界面（专供任务开始前使用）",
        "recognition": {
            "type": "Custom",
            "param": {
                "custom_recognition": "Count",
                "custom_recognition_param": {
                    "target": 2
                }
            }
        },
        "next": [
            "HomeFlagCloseReturnMain",
            "[JumpBack]HomeButton",
            "[JumpBack]BackButton",
            "[JumpBack]HomeLoading",
            "[JumpBack]ObtainedAwards",
            "[JumpBack]AccumulatedSignIn",
            "[JumpBack]BirthdayReward",
            "[JumpBack]SignInReward",
            "[JumpBack]Reward",
            "[JumpBack]ClosePage",
            "[JumpBack]StartGame",
            "[JumpBack]Confirm",
            "[JumpBack]VictoryReturn",
            "[JumpBack]Download",
            "[JumpBack]Downloading",
            "[JumpBack]CandyCancel",
            "[JumpBack]ClickBlank",
            "[JumpBack]SkipButton",
            "[JumpBack]ClickHomeCount"
        ]
    },
    "StartGame": {
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "roi": [
                    352,
                    230,
                    587,
                    183
                ],
                "template": "StartUp/StartGame.png",
                "green_mask": true
            }
        },
        "action": {
            "type": "Click"
        },
        "next": [
            "HomeFlagFirst",
            "StartGame",
            "[JumpBack]HomeLoading_wait",
            "[JumpBack]ObtainedAwards",
            "[JumpBack]AccumulatedSignIn",
            "[JumpBack]BirthdayReward",
            "[JumpBack]Reward",
            "[JumpBack]SignInReward",
            "[JumpBack]ClickTarot",
            "[JumpBack]Confirm",
            "[JumpBack]ClosePageFirst",
            "[JumpBack]CandyCancel",
            "[JumpBack]BackButton",
            "[JumpBack]HomeButton",
            "[JumpBack]SkipButton",
            "[JumpBack]ClickHomeCount"
        ]
    },
    "HomeLoading": {
        "recognition": {
            "type": "Custom",
            "param": {
                "custom_recognition": "MultiRecognition",
                "custom_recognition_param": {
                    "nodes": [
                        "HomeLoading_Old",
                        "HomeLoading_NewRightDown",
                        "HomeLoading_OCR"
                    ],
                    "logic": {
                        "type": "CUSTOM",
                        "expression": "$0 OR $1 AND $2"
                    },
                    "return": [
                        459,
                        359,
                        364,
                        152
                    ]
                }
            }
        },
        "post_wait_freezes": {
            "time": 500,
            "target": [
                517,
                271,
                259,
                140
            ]
        }
    },
    "HomeLoading_Old": {
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "roi": [
                    459,
                    359,
                    364,
                    152
                ],
                "template": "StartUp/HomeLoading.png"
            }
        }
    },
    "HomeLoading_NewRightDown": {
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "roi": [
                    1101,
                    612,
                    179,
                    108
                ],
                "template": "StartUp/HomeLoading_NewRightDown.png"
            }
        }
    },
    "HomeLoading_OCR": {
        "recognition": {
            "type": "OCR",
            "param": {
                "roi": [
                    415,
                    469,
                    417,
                    30
                ],
                "expected": ".*",
                "only_rec": true
            }
        }
    },
    "HomeLoading_wait": {
        "doc": "专供启动时使用，与原版分开以防止ReturnMain大面积报错",
        "recognition": {
            "type": "Custom",
            "param": {
                "custom_recognition": "MultiRecognition",
                "custom_recognition_param": {
                    "nodes": [
                        "HomeLoading_Old",
                        "HomeLoading_NewRightDown",
                        "HomeLoading_OCR"
                    ],
                    "logic": {
                        "type": "CUSTOM",
                        "expression": "$0 OR $1 AND $2"
                    },
                    "return": [
                        459,
                        359,
                        364,
                        152
                    ]
                }
            }
        },
        "action": {
            "type": "Click"
        },
        "next": [
            "HomeFlagFirst",
            "HomeLoading_wait",
            "[JumpBack]SkipButton",
            "[JumpBack]BackButton",
            "[JumpBack]HomeButton",
            "[JumpBack]ObtainedAwards",
            "[JumpBack]AccumulatedSignIn",
            "[JumpBack]BirthdayReward",
            "[JumpBack]Reward",
            "[JumpBack]SignInReward",
            "[JumpBack]ClickTarot",
            "[JumpBack]Confirm",
            "[JumpBack]ClickBlank",
            "[JumpBack]ClosePageFirst",
            "[JumpBack]CandyCancel",
            "[JumpBack]ClickHomeCount"
        ]
    },
    "Start1999": {
        "action": {
            "type": "StartApp",
            "param": {
                "package": "com.shenlan.m.reverse1999/com.ssgame.mobile.gamesdk.frame.AppStartUpActivity"
            }
        },
        "on_error": [
            "Start1999Error"
        ],
        "next": [
            "DisableStart1999"
        ]
    },
    "Start1999Error": {
        "action": {
            "type": "Custom",
            "param": {
                "custom_action": "DisableNode",
                "custom_action_param": {
                    "node_name": "Start1999"
                }
            }
        },
        "focus": {
            "Node.Action.Starting": "err:启动游戏失败，请检查是否正确选择游戏资源"
        }
    },
    "DisableStart1999": {
        "action": {
            "type": "Custom",
            "param": {
                "custom_action": "DisableNode",
                "custom_action_param": {
                    "node_name": "Start1999"
                }
            }
        }
    },
    "BluePochLogo": {
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "roi": [
                    298,
                    163,
                    620,
                    336
                ],
                "template": "StartUp/BluePochLogo.png"
            }
        },
        "post_delay": 3000
    },
    "Disclaimer": {
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "roi": [
                    512,
                    107,
                    238,
                    214
                ],
                "template": "StartUp/Disclaimer.png"
            }
        },
        "post_delay": 3000
    },
    "GameLoading": {
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "roi": [
                    323,
                    0,
                    599,
                    563
                ],
                "template": "StartUp/GameLoading.png"
            }
        },
        "post_delay": 3000
    },
    "GameLoading2": {
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "roi": [
                    1161,
                    0,
                    119,
                    120
                ],
                "template": "StartUp/GameLoading2.png"
            }
        },
        "post_delay": 3000
    },
    "Downloading": {
        "recognition": {
            "type": "OCR",
            "param": {
                "roi": [
                    435,
                    627,
                    402,
                    93
                ],
                "expected": [
                    "正在",
                    "更新",
                    "下载"
                ]
            }
        },
        "post_wait_freezes": {
            "time": 300,
            "target": [
                0,
                0,
                1280,
                184
            ]
        }
    },
    "Download": {
        "recognition": {
            "type": "OCR",
            "param": {
                "roi": [
                    712,
                    390,
                    187,
                    150
                ],
                "expected": [
                    "下载",
                    "重试"
                ]
            }
        },
        "action": {
            "type": "Click"
        },
        "max_hit": 5
    },
    "SkipButton": {
        "recognition": {
            "type": "OCR",
            "param": {
                "roi": [
                    1094,
                    0,
                    186,
                    119
                ],
                "expected": [
                    "跳过",
                    "Skip"
                ]
            }
        },
        "action": {
            "type": "Click"
        },
        "post_wait_freezes": {
            "time": 300,
            "target": "HomeLoading_wait"
        }
    },
    "HomeFlag": {
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "roi": [
                    1022,
                    419,
                    194,
                    166
                ],
                "template": [
                    "StartUp/HomeFlag.png",
                    "StartUp/HomeFlag_sp01.png",
                    "StartUp/HomeFlag3.2.png"
                ]
            }
        },
        "action": {
            "type": "Click",
            "param": {
                "target": [
                    576,
                    298,
                    68,
                    64
                ]
            }
        }
    },
    "HomeFlagFirst": {
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "roi": [
                    1022,
                    419,
                    194,
                    166
                ],
                "template": [
                    "StartUp/HomeFlag.png",
                    "StartUp/HomeFlag_sp01.png",
                    "StartUp/HomeFlag3.2.png"
                ]
            }
        },
        "action": {
            "type": "Click",
            "param": {
                "target": [
                    576,
                    298,
                    68,
                    64
                ]
            }
        },
        "post_delay": 3000,
        "next": [
            "HomeFlag",
            "[JumpBack]HomeLoading_wait",
            "[JumpBack]ObtainedAwards",
            "[JumpBack]AccumulatedSignIn",
            "[JumpBack]BirthdayReward",
            "[JumpBack]Reward",
            "[JumpBack]SignInReward",
            "[JumpBack]ClickTarot",
            "[JumpBack]Confirm",
            "[JumpBack]ClosePageFirst",
            "[JumpBack]BackButton",
            "[JumpBack]HomeButton",
            "[JumpBack]SkipButton",
            "[JumpBack]CandyCancel",
            "[JumpBack]ClickHomeCount"
        ]
    },
    "HomeFlagCloseReturnMain": {
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "roi": [
                    1022,
                    419,
                    194,
                    166
                ],
                "template": [
                    "StartUp/HomeFlag.png",
                    "StartUp/HomeFlag_sp01.png",
                    "StartUp/HomeFlag3.2.png"
                ]
            }
        },
        "action": {
            "type": "Custom",
            "param": {
                "custom_action": "DisableNode",
                "custom_action_param": {
                    "node_name": "ReturnMain"
                }
            }
        }
    },
    "BackButton": {
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "roi": [
                    0,
                    0,
                    134,
                    138
                ],
                "template": [
                    "StartUp/BackButton.png"
                ],
                "green_mask": true
            }
        },
        "action": {
            "type": "Click"
        }
    },
    "BackButtonWithDelay": {
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "roi": [
                    0,
                    0,
                    134,
                    138
                ],
                "template": [
                    "StartUp/BackButton.png"
                ],
                "green_mask": true
            }
        },
        "action": {
            "type": "Click"
        },
        "post_delay": 3000
    },
    "HomeButton": {
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "roi": [
                    70,
                    0,
                    144,
                    144
                ],
                "template": [
                    "StartUp/HomeButton.png",
                    "StartUp/HomeButton_White.png"
                ]
            }
        },
        "action": {
            "type": "Click",
            "param": {
                "target_offset": [
                    30,
                    0,
                    -30,
                    0
                ]
            }
        }
    },
    "ClickHomeCount": {
        "max_hit": 20,
        "action": {
            "type": "Click",
            "param": {
                "target": [
                    576,
                    298,
                    68,
                    64
                ]
            }
        },
        "post_delay": 1500
    },
    "Stop": {},
    "Reward": {
        "doc": "防卡日历",
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "roi": [
                    419,
                    90,
                    297,
                    148
                ],
                "template": [
                    "StartUp/Reward.png",
                    "StartUp/Reward1.png",
                    "StartUp/Reward2.png",
                    "StartUp/Reward3.png", // 刺客联动版本
                    "StartUp/Reward4.png"
                ]
            }
        },
        "action": {
            "type": "Click",
            "param": {
                "target": [
                    0,
                    0,
                    526,
                    590
                ]
            }
        },
        "post_wait_freezes": {
            "time": 300,
            "target": "HomeLoading_wait"
        }
    },
    "AccumulatedSignIn": {
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "roi": [
                    562,
                    483,
                    347,
                    163
                ],
                "template": [
                    "StartUp/AccumulatedSignIn_new.png",
                    "StartUp/AccumulatedSignIn.png"
                ]
            }
        },
        "action": {
            "type": "Click"
        },
        "post_delay": 3000
    },
    "BirthdayReward": {
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "roi": [
                    803,
                    273,
                    121,
                    121
                ],
                "template": "StartUp/BirthdayReward.png",
                "threshold": 0.8
            }
        },
        "action": {
            "type": "Click"
        },
        "post_delay": 3000
    },
    "ClosePageFirst": {
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "roi": [
                    1040,
                    40,
                    239,
                    178
                ],
                "template": [
                    "StartUp/CloseRewardPage_2.2.png",
                    "StartUp/CloseRewardPage_2.4.png",
                    "StartUp/CloseItemDetail.png",
                    "StartUp/CloseItemDetail1.png"
                ],
                "green_mask": true,
                "threshold": 0.6,
                "order_by": "Score"
            }
        },
        "post_delay": 3000,
        "next": [
            "SignInReward",
            "ClosePage"
        ]
    },
    "ClosePage": {
        // 用于关闭各种页面，如签到、公告、物品详情页
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "roi": [
                    885,
                    40,
                    394,
                    177
                ],
                "template": [
                    "StartUp/CloseRewardPage_2.2.png",
                    "StartUp/CloseRewardPage_2.4.png",
                    "StartUp/CloseItemDetail.png",
                    "StartUp/CloseItemDetail1.png"
                ],
                "green_mask": true,
                "threshold": 0.6,
                "order_by": "Score"
            }
        },
        "action": {
            "type": "Click"
        },
        "post_delay": 3000,
        "next": [
            "OverrideClosePageFirst"
        ]
    },
    "OverrideClosePageFirst": {
        "action": {
            "type": "Custom",
            "param": {
                "custom_action": "NodeOverride",
                "custom_action_param": {
                    "ClosePageFirst": {
                        "post_delay": 1500
                    }
                }
            }
        }
    },
    "SignInReward": {
        // 领取签到奖励
        "recognition": {
            "type": "Custom",
            "param": {
                "custom_recognition": "MultiRecognition",
                "custom_recognition_param": {
                    "nodes": [
                        "SignInReward_template",
                        "SignInReward_color",
                        "SignInReward_color1"
                    ],
                    "logic": {
                        "type": "CUSTOM",
                        "expression": "$0 AND ($1 OR $2)"
                    },
                    "return": "INTERSECTION(OFFSET($0,20,0,0,0),UNION($1,$2))"
                }
            }
        },
        "action": {
            "type": "Click"
        },
        "post_delay": 3000
    },
    "SignInReward_template": {
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "template": "StartUp/SignInReward.png",
                "roi": [
                    115,
                    562,
                    1048,
                    155
                ],
                "threshold": 0.88
            }
        }
    },
    "SignInReward_color": {
        // 偏橙的颜色（独一律签到）
        "recognition": {
            "type": "ColorMatch",
            "param": {
                "upper": [
                    255,
                    117,
                    36
                ],
                "lower": [
                    218,
                    67,
                    0
                ],
                "roi": "SignInReward_template",
                "count": 130
            }
        }
    },
    "SignInReward_color1": {
        // 偏黄的颜色
        "recognition": {
            "type": "ColorMatch",
            "param": {
                "upper": [
                    255,
                    186,
                    47
                ],
                "lower": [
                    218,
                    136,
                    0
                ],
                "roi": "SignInReward_template",
                "count": 250
            }
        }
    },
    "ClickTarot": {
        "recognition": {
            "type": "OCR",
            "param": {
                "expected": [
                    "点击",
                    "揭开",
                    "奥秘",
                    "继续"
                ],
                "roi": [
                    528,
                    580,
                    226,
                    121
                ]
            }
        },
        "action": {
            "type": "Click"
        }
    },
    "Confirm": {
        "recognition": {
            "type": "OCR",
            "param": {
                "expected": [
                    "确认",
                    "确定"
                ],
                "roi": [
                    590,
                    392,
                    255,
                    61
                ]
            }
        },
        "action": {
            "type": "Click"
        }
    },
    "VictoryReturn": {
        "recognition": {
            "type": "OCR",
            "param": {
                "roi": [
                    678,
                    10,
                    473,
                    240
                ],
                "expected": [
                    "战斗",
                    "胜利"
                ]
            }
        },
        "action": {
            "type": "Click"
        }
    },
    "CandyCancel": {
        "recognition": {
            "type": "OCR",
            "param": {
                "roi": [
                    741,
                    489,
                    127,
                    34
                ],
                "expected": "以后再说",
                "only_rec": true
            }
        },
        "action": {
            "type": "Click"
        }
    }
}